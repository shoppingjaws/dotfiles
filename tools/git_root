#!/usr/bin/env bun

import { $ } from "bun";

async function gitRoot() {
  try {
    // Check if current directory is in a git repository
    await $`git rev-parse --is-inside-work-tree`.quiet();

    // Get the git root directory
    const result = await $`git rev-parse --show-toplevel`.quiet();
    const gitRootPath = result.stdout.toString().trim();

    // Output cd command for shell to execute
    console.log(`cd "${gitRootPath}"`);
  } catch (error) {
    console.error("Error: Not in a git repository");
    process.exit(1);
  }
}

await gitRoot();